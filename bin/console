#!/usr/bin/env php
<?php

declare(strict_types=1);

use App\App\Command\ValidateCompaniesCommand;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\Console\Application;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\PhpFileLoader;

require __DIR__ . '/../vendor/autoload.php';

$containerBuilder = new ContainerBuilder();

$loader = new PhpFileLoader(
    $containerBuilder,
    new FileLocator(__DIR__ . '/../config')
);
$loader->load('services.php');

$containerBuilder->compile();

/** @var ValidateCompaniesCommand $command */
$command = $containerBuilder->get(ValidateCompaniesCommand::class);

$application = new Application('Company JSON Validator', '1.0.0');
$application->add($command);
$application->setDefaultCommand($command->getName(), true);

$application->run();
